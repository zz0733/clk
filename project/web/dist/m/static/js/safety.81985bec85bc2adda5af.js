/*! sign by h5 */
webpackJsonp([27],{"126j":function(e,t,a){"use strict";function r(e){a("kqr9")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("YtJ0"),o=a("xzxg"),n={data:function(){return{showKeyboard:!1,value:""}},methods:{onInput:function(e){this.value=(this.value+e).slice(0,6)},onDelete:function(){this.value=this.value.slice(0,this.value.length-1)},submitPay:function(){var e=this;this.$http.post(this.$HOST_NAME+"/member/resetMember",{payPassword:this.value}).then(function(t){"success"==t.status&&(e.showKeyboard=!1,e.value="",o.a.vpGetBasicInfo.call(e),e.$toast.success("设置成功"))})},keyboardShow:function(){"test"==localStorage.getItem("Public_User")?this.$newToast("试玩用户无权限，请注册正式用户"):this.showKeyboard=!0},goUpdate:function(e){"test"==localStorage.getItem("Public_User")?this.$newToast("试玩用户无权限，请注册正式用户"):this.$router.push(e)}},store:s.a},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"safety"},[a("div",{staticClass:"safety-list"},[a("div",{staticClass:"row clearfloat"},[e._m(0),e._v(" "),a("div",{staticClass:"row-right fr",on:{click:function(t){e.goUpdate("/personal_index/update_pwd/0")}}},[a("span",[e._v("修改")]),e._v(" "),a("span",{staticClass:" cubeic-arrow"})])]),e._v(" "),a("div",{staticClass:"row clearfloat"},[e._m(1),e._v(" "),"set"!=this.$store.state.mainState.userinfo.payPassword?a("div",{staticClass:"row-right fr",on:{click:e.keyboardShow}},[a("span",[e._v("未设置")]),e._v(" "),a("span",{staticClass:" cubeic-arrow"})]):a("div",{staticClass:"row-right fr",on:{click:function(t){e.goUpdate("/personal_index/update_pwd/1")}}},[a("span",[e._v("修改")]),e._v(" "),a("span",{staticClass:" cubeic-arrow"})])]),e._v(" "),a("div",{staticClass:"row clearfloat"},[e._m(2),e._v(" "),a("div",{staticClass:"row-right fr",on:{click:function(t){e.goUpdate("/personal_index/mibao")}}},[a("span",[e._v("修改")]),e._v(" "),a("span",{staticClass:" cubeic-arrow"})])])]),e._v(" "),e.showKeyboard?a("div",{staticClass:"keyboard"},[a("div",{staticClass:"title"},[a("i",{staticClass:"cubeic-close fl",on:{click:function(t){e.showKeyboard=!1}}}),e._v("\n                 请设置资金密码\n                 "),a("span",{staticClass:"fr",on:{click:e.submitPay}},[e._v("完成")])]),e._v(" "),a("div",{staticClass:"reminder"},[e._v("\n                  为了保障您的资金安全，请牢记资金密码\n             ")]),e._v(" "),a("van-password-input",{staticClass:"pasyworld",attrs:{value:e.value}}),e._v(" "),a("van-number-keyboard",{staticClass:"numberKey",attrs:{show:e.showKeyboard},on:{input:e.onInput,delete:e.onDelete}})],1):e._e()])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row-left fl"},[r("img",{attrs:{src:a("kFx8"),alt:""}}),e._v(" "),r("span",[e._v("登录密码")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row-left fl"},[r("img",{attrs:{src:a("NZKP"),alt:""}}),e._v(" "),r("span",[e._v("资金密码")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row-left fl"},[r("img",{attrs:{src:a("UZY1"),alt:""}}),e._v(" "),r("span",[e._v("安全问题")])])}],l={render:i,staticRenderFns:c},u=l,p=a("VU/8"),f=r,d=p(n,u,!1,f,"data-v-72a18c24",null);t.default=d.exports},NZKP:function(e,t,a){e.exports=a.p+"static/img/src/assets/img/public/image/common/personal/userInfo/safe-transaction@3x.e0d7be8.png"},QXg8:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".safety .safety-list[data-v-72a18c24]{margin-top:.1rem;background:#fff;padding:0 .2rem}.safety .safety-list .row[data-v-72a18c24]{height:1.02rem;border-bottom:1px solid #f5f5f5;padding:.24rem 0}.safety .safety-list .row .row-left img[data-v-72a18c24]{width:.54rem;height:.54rem;vertical-align:middle}.safety .safety-list .row .row-left span[data-v-72a18c24]{font-size:.28rem;padding-left:.1rem}.safety .safety-list .row .row-right[data-v-72a18c24]{padding-top:.12rem}.safety .safety-list .row .row-right span[data-v-72a18c24]{font-size:.3rem;color:#898989}.safety .keyboard[data-v-72a18c24]{background:#fff;margin-top:2.3rem;padding-bottom:.1rem;position:fixed;bottom:0;left:0;width:100%}.safety .keyboard .title[data-v-72a18c24]{text-align:center;height:1rem;line-height:1rem;font-size:.34rem;padding:0 .3rem}.safety .keyboard .title span[data-v-72a18c24]{font-size:.34rem}.safety .keyboard .reminder[data-v-72a18c24]{height:1.1rem;line-height:1.1rem;text-align:center;font-size:.3rem;border-top:1px solid #dbdbdb}.safety .keyboard .pasyworld ul li[data-v-72a18c24]{width:1.14rem;height:1.04rem}.safety .keyboard .numberKey[data-v-72a18c24]{position:static;margin-top:.1rem;border-top:none}",""])},UZY1:function(e,t,a){e.exports=a.p+"static/img/src/assets/img/public/image/common/personal/userInfo/safe-safe@3x.1640a19.png"},YtJ0:function(e,t,a){"use strict";var r=a("7+uW"),s=a("NYxO"),o=a("mvHQ"),n=a.n(o),i={headerTitle:"购彩大厅",userinfo:localStorage.userinfo&&JSON.parse(localStorage.userinfo),userBank:[],nowApi:"v1",balance:localStorage.userinfo&&JSON.parse(localStorage.userinfo).balance,ifpourT:!0},c={namespaced:!0,state:i,mutations:{resetHeaderTit:function(e,t){e.headerTitle=t},reloadUserinfo:function(e){e.userinfo=localStorage.userinfo&&JSON.parse(localStorage.userinfo)},resetUserinfo:function(e,t){e.userinfo=t},resetNowApi:function(e,t){e.nowApi=t},resetBalance:function(e,t){e.balance=t;var a=JSON.parse(localStorage.userinfo);a.balance=t,localStorage.setItem("userinfo",n()(a))},resetPour:function(e,t){e.ifpourT=t}},actions:{}},l=c,u={gameActive:0,balance:localStorage.userinfo&&JSON.parse(localStorage.userinfo).balance},p={state:u,mutations:{reselutGame:function(e,t){e.gameActive=t}}},f=p;r.a.use(s.a);var d=new s.a.Store({modules:{mainState:l,personal:f}});t.a=d},kFx8:function(e,t,a){e.exports=a.p+"static/img/src/assets/img/public/image/common/personal/userInfo/safe-login@3x.e806761.png"},kqr9:function(e,t,a){var r=a("QXg8");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("1151c4c2",r,!0,{})},xzxg:function(e,t,a){"use strict";function r(){function e(e,t){return f.a.post(e,t)}var t=function(){var t=l()(i.a.mark(function t(a){var s,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.call(a,m.a.prototype.$HOST_NAME+"/member/userinfo",{});case 2:if(s=t.sent,200!==s.code){t.next=9;break}return n=s.data,localStorage.setItem("userinfo",o()(n)),t.abrupt("return",n);case 9:r.removeCache();case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=l()(i.a.mark(function t(a){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.call(a,m.a.prototype.$HOST_NAME+"/member/logout",{});case 2:s=t.sent,200===s.code?(r.removeCache(),d.d.success("登出成功！"),window.location.reload()):(r.removeCache(),d.d.fail("登出失败！"));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),r=this;this.vpGetBasicInfo=l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.token){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,t(this);case 4:a=e.sent,a&&u.a.commit("mainState/reloadUserinfo");case 6:case"end":return e.stop()}},e,this)})),this.reloadBalance=l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.token){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,f.a.post(m.a.prototype.$HOST_NAME+"/member/getBalance",{});case 4:t=e.sent,200==t.code?u.a.commit("mainState/resetBalance",t.data):d.d.fail(t.message);case 6:case"end":return e.stop()}},e,this)})),this.expiredPart=function(e){if(!e)return!1;var t=e.split(".")[1],a={enKey:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",deKey:new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),encode:function(e){for(var t,a,r,s=new Array,o=0;o+3<=e.length;)t=e.charCodeAt(o++),a=e.charCodeAt(o++),r=e.charCodeAt(o++),s.push(this.enKey.charAt(t>>2),this.enKey.charAt((t<<4)+(a>>4)&63)),s.push(this.enKey.charAt((a<<2)+(r>>6)&63),this.enKey.charAt(63&r));return o<e.length&&(t=e.charCodeAt(o++),s.push(this.enKey.charAt(t>>2)),o<e.length?(a=e.charCodeAt(o),s.push(this.enKey.charAt((t<<4)+(a>>4)&63)),s.push(this.enKey.charAt(a<<2&63),"=")):s.push(this.enKey.charAt(t<<4&63),"==")),s.join("")},decode:function(e){var t,a,r,s,o=new Array,n=0;for(e=e.replace(/[^A-Za-z0-9\+\/]/g,"");n+4<=e.length;)t=this.deKey[e.charCodeAt(n++)],a=this.deKey[e.charCodeAt(n++)],r=this.deKey[e.charCodeAt(n++)],s=this.deKey[e.charCodeAt(n++)],o.push(String.fromCharCode((t<<2&255)+(a>>4),(a<<4&255)+(r>>2),(r<<6&255)+s));return n+1<e.length&&(t=this.deKey[e.charCodeAt(n++)],a=this.deKey[e.charCodeAt(n++)],n<e.length?(r=this.deKey[e.charCodeAt(n)],o.push(String.fromCharCode((t<<2&255)+(a>>4),(a<<4&255)+(r>>2)))):o.push(String.fromCharCode((t<<2&255)+(a>>4)))),o.join("")}},r=JSON.parse(a.decode(t)),s=Math.floor((new Date).getTime()/1e3);return{exp:r.exp,timestamp:s}};var s=!0;this.expired=function(){var e=r.expiredPart(localStorage.token);if(e.exp-e.timestamp<=1800&&0<=e.exp-e.timestamp){if(!s)return!1;s=!1,setTimeout(function(){r.vpReloadToken()},5e3)}else 0>e.exp-e.timestamp&&r.removeCache()},this.vpReloadToken=l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.token){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,f.a.post(m.a.prototype.$HOST_NAME+"/member/refresh",{});case 4:t=e.sent,200===t.code?(localStorage.setItem("token",t.data),s=!0):r.removeCache();case 6:case"end":return e.stop()}},e,this)})),this.vpSetConfig=function(){var e=this;if(localStorage.updated_at)return r.vpGetBasWebsoc(),!1;m.a.prototype.$nextTick(l()(i.a.mark(function t(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(m.a.prototype.$HOST_NAME+"/config",{});case 2:a=e.sent,a&&200==a.code&&(a.data.siteConfig.siteId=a.data.id,localStorage.setItem("configTime",a.data.data?a.data.data.updated_at:a.data.updated_at),localStorage.setItem("config",a.data.data?o()(a.data.data.siteConfig):o()(a.data.siteConfig)),r.vpGetBasWebsoc());case 4:case"end":return e.stop()}},t,e)})))},this.vpReloadConfig=l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(m.a.prototype.$HOST_NAME+"/config",{});case 2:t=e.sent,200==t.code&&(t.data.siteConfig.siteId=t.data.id,localStorage.setItem("configTime",t.sign),localStorage.setItem("config",t.data.data?o()(t.data.data.siteConfig):o()(t.data.siteConfig)));case 4:case"end":return e.stop()}},e,this)}));var n=!0,c="";this.vpGetBasWebsoc=function(){var t=this;if(c=this,!n)return!1;m.a.prototype.$nextTick(l()(i.a.mark(function a(){var s,o,l,u,p,f,d,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=function(e){for(var t="",a=0;a<e;a++){var r=Math.ceil(35*Math.random());t+=f[r]}return t},t.next=3,e(m.a.prototype.$HOST_NAME+"/websocket",{});case 3:if(s=t.sent,200!=s.code){t.next=8;break}n=!1,t.next=10;break;case 8:if(s){t.next=10;break}return t.abrupt("return",!1);case 10:o=s.data.wss,l={},u="",p="",f=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],localStorage.userinfo&&(u=""+JSON.parse(localStorage.userinfo).uid),"test"==localStorage.Public_User?p="test":"vm"==localStorage.Public_User?p="vm":"v1"==localStorage.Public_User&&localStorage.token?p="member":(h=JSON.parse(localStorage.config).siteId,p="anonymous",u=h+"_"+(new Date).getTime()+d(16)),l.socket=Stomp.client(o),l.headers={id:u,group:p},l.message={all:"/topic/public",group:"/group/"+l.headers.group,alone:"/user/"+l.headers.group+"_"+l.headers.id+"/message"},l.socket.connect(l.headers,function(e){l.socket.subscribe(l.message.all,function(e){"user.lotteryOpen"==JSON.parse(e.body).type?c.websoc&&c.websoc(JSON.parse(e.body)):r.publicInform(JSON.parse(e.body))}),l.socket.subscribe(l.message.group,function(e){"user.lotteryOpen"==JSON.parse(e.body).type?c.websoc&&c.websoc(JSON.parse(e.body)):r.publicInform(JSON.parse(e.body))}),l.socket.subscribe(l.message.alone,function(e){"user.lotteryOpen"==JSON.parse(e.body).type?c.websoc&&c.websoc(JSON.parse(e.body)):r.publicInform(JSON.parse(e.body))})});case 21:case"end":return t.stop()}},a,t)})))},this.publicInform=function(e){if("user.lotteryOpen"==e.type)return!1;d.a.alert({title:e.typeName?e.typeName:"温馨提示",message:e.message}).then(function(){})},this.logout=l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.token){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,a(this);case 4:t=e.sent;case 5:case"end":return e.stop()}},e,this)})),this.removeCache=function(){if(localStorage.removeItem("token"),localStorage.removeItem("userinfo"),localStorage.removeItem("refundKey"),localStorage.removeItem("list"),u.a.commit("mainState/resetUserinfo",null),"/api/vm"==m.a.prototype.$HOST_NAME)return!1;localStorage.removeItem("Public_User"),m.a.prototype.$HOST_NAME="/api/v1"},this.setCache=function(e,t){if(localStorage.setItem("token",e.data.token),localStorage.setItem("userinfo",o()(e.data.userinfo)),u.a.commit("mainState/reloadUserinfo"),"/api/vm"==m.a.prototype.$HOST_NAME)return!1;localStorage.setItem("Public_User",t),m.a.prototype.$HOST_NAME="/api/"+t},this.vpInitHtml=function(e,t){this.fontSize=+document.querySelector("html").style.fontSize.split("px")[0]/100;var a=window.innerHeight;if("init"==e){var r=0;r=t&&"k3"==t?133:t&&"pcdd"==t||t&&"3d"==t?137:185;var s=a-(r+80+88)*this.fontSize;this.$refs["lottery-cont"].style.height=s+"px"}}}var s=a("mvHQ"),o=a.n(s),n=a("Xxa5"),i=a.n(n),c=a("exGp"),l=a.n(c),u=a("YtJ0"),p=a("mtWM"),f=a.n(p),d=a("Fd2+"),m=a("7+uW");t.a=new r}});